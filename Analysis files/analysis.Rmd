---
title: "Unveiling Coffee Sales Dynamics: Analyzing Store Performance, Product Categories, and Temporal Trends"
author: "Sasank Lakimsetti"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: scroll
date: "07 April, 2024"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, message = FALSE)
pacman::p_load(tidyverse,
               dplyr,
               ggplot2,
               reactable,
               flexdashboard,
               here)
```
# Datset
```{r}
data<-read.csv("C://lpu//4th sem//INT232 - R Programming//Project//Project Files//dataset.csv")
reactable::reactable(data)
```

### The dataset has been retreived from [Kaggle](https://www.kaggle.com/datasets/divu2001/coffee-shop-sales-analysis).The data contains sales of six months of the year 2023.

# Store Location Analysis
```{r fig.align='center'}
sub1 <- data %>%
  group_by(store_location) %>%
  summarise(transaction_qty = sum(transaction_qty))
plot1<-ggplot(data=sub1, mapping=aes(x=store_location, y=transaction_qty)) +
  geom_col(fill="palevioletred") +
  geom_text(aes(label=transaction_qty), vjust=-0.5, check_overlap=TRUE) +
  scale_y_continuous(limits=c(0, 80000), breaks=seq(0, 80000, by=10000)) +
  labs(title="Analysis based on store locations",
       subtitle = "This analyzes sales performance across different stores based on their locations.",
       x="Store Location", y="Total Transaction Quantity")
plot1
```

### Conclusion:

-   From this analysis, we can say that all stores' sales are good where sales of store at Lower Manhattan is higher compared to other locations with 71742 sales.

# Product Category Analysis

```{r fig.width=14, fig.height=6, fig.align='center'}
sub2 <- data %>%
  group_by(product_category) %>%
  summarise(transaction_qty=sum(transaction_qty))
plot2<-ggplot(data=sub2,
       mapping=aes(x=product_category,
                   y=transaction_qty)) +
  geom_col(fill="palevioletred") +
  geom_text(aes(label=transaction_qty),vjust=-0.5, check_overlap = TRUE) +
  labs(title = "Analysis based on Product Categories",
       subtitle="This involves analyzing sales data based on product categories.",
       x="Product Category",
       y="Total Transaction quantity")
plot2
```

```{r fig.width=14, fig.height=6, fig.align='center'}
sub9<-data %>%
  group_by(product_category)%>%
  summarise(Total_Bill=sum(Total_Bill))
plot6<-ggplot(sub9, mapping = aes(x=product_category,
                           y=Total_Bill)) +
  geom_col(fill="palevioletred") +
  geom_text(aes(label=Total_Bill), vjust=-0.5,check_overlap = TRUE) +
  labs(title = "Profit Analysis",
       subtitle = "This analyzes the profit gained on each product category",
       x="Product Category",
       y="Profit gained")
plot6
```

### Conclusion
-   There are highest sales for Coffee with total 89250 sales followed by Tea with 69737 sales.
-   The highest profit was earned on Coffee category of total sum 269952.45 .
-   The second highest profit was earned on Tea category of total sum 196405.95 .
-   The least profit was earned on Packaged Chocolate category of total sum 4407.64 .

# Product Type Analysis
```{r fig.width=32, fig.height=6, fig.align='center'}
sub3<- data %>%
  group_by(product_type) %>%
  summarize(transaction_qty=sum(transaction_qty))
plot3<-ggplot(sub3, 
       mapping=aes(x=product_type,
                   y=transaction_qty)) +
  geom_col(fill="palevioletred") +
  geom_text(aes(label=transaction_qty), vjust=-0.5, check_overlap = TRUE)+
  labs(title = "Product Type Analysis",
       subtitle = "This analyzes the sales data based on product types.",
       x="Product Type",
       y="Total Transaction Quantity")
plot3
```

```{r fig.width=32, fig.height=6, fig.align='center'}
sub8 <- data %>%
  group_by(product_type) %>%
  summarize(Total_Bill=sum(Total_Bill))
plot5<-ggplot(sub8, mapping=aes(x=product_type,
                         y=Total_Bill)) +
  geom_col(fill="palevioletred") +
  geom_text(aes(label=Total_Bill),vjust=-0.5, check_overlap = TRUE) +
  labs(title="Profit Analysis",
       subtitle = "This analyzes the profit gained on each product type.",
       x="Product Type",
       y="Profit gained")
plot5
```

### Conclusion:
-   The highest selling product was Brewed Chai Tea with 26250 sales.
-   The second highest selling product was Gourmet Brewed Coffee with 25973 sales.
-   There is highest profit gained for Barista Espresso with total sum of 91406.2 .
-   The second highest profit was gained with Brewed Black Tea with total sum of 77081.95 .
-   The least profit was gained by Green Beans with total sum of 1340 .

# Product Quantity Analysis
```{r fig.align='center'}
sub7<-data %>%
  group_by(Size) %>%
  summarise(transaction_qty=sum(transaction_qty))
plot4<-ggplot(sub7, mapping=aes(x=Size,
                         y=transaction_qty)) +
  geom_col(fill="palevioletred") +
  geom_text(aes(label=transaction_qty), vjust=-0.5, check_overlap = TRUE)+
  labs(title = "Product Quantity Analysis",
       subtitle = "This analyzes the sales data based on order size.",
       x="Size",
       y="Total Transaction Quantity")
plot4
```

### Conclusion
-   There are highest sales for Regular size with total sales of 70186.
-   The second highest sales are for Large size with total sales of 68540.
-   NOTE: Not Defined refers to some products where the item size is fixed such as pastry, etc.

# Temporal Analysis
```{r fig.width=14, fig.align='center'}
month.order <- c("January", "February", "March", "April", "May", "June", 
                 "July", "August", "September", "October", "November", "December")
sub4<-data %>%
  group_by(Month.Name) %>%
  summarize(transaction_qty=sum(transaction_qty))

sub4$Month.Name <- factor(sub4$Month.Name, levels = month.order)

plot7<-ggplot(sub4, mapping = aes(x=Month.Name, y=transaction_qty)) +
  geom_line(size=1, group=1, color="palevioletred") + 
  geom_text(aes(label=transaction_qty), vjust=-0.5, check_overlap = TRUE) +
  labs(title="Temporal Analysis - I", subtitle = "This analyzes the pattern of sales of products over the months",
       x="Month", y="Total Transaction Quantity")
plot7
```

```{r fig.width=14, fig.align='center'}
day.order<-c("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday")
sub5<- data %>%
  group_by(Day.Name) %>%
  summarise(transaction_qty=sum(transaction_qty))
sub5$Day.Name <- factor(sub5$Day.Name, levels=day.order)
plot8<-ggplot(sub5, mapping=aes(x=Day.Name,
                         y=transaction_qty)) +
  geom_line(size=1,group=1,color="palevioletred") +
  geom_text(aes(label=transaction_qty), vjust=-0.5, check_overlap = TRUE) +
  labs(title="Temporal Analysis - II", subtitle = "This analyzes the pattern of day wise sales of products",
       x="Day", y="Total Transaction Quantity")
plot8 
```

```{r fig.width=14, fig.align='center'}
hour.order<-c(0:23)
sub6<-data%>%
  group_by(Hour) %>%
  summarise(transaction_qty=sum(transaction_qty))
sub6$Hour<-factor(sub6$Hour, levels=hour.order)
plot9<-ggplot(sub6, mapping=aes(x=Hour,
                         y=transaction_qty)) +
  geom_line(size=1, group=1, color="palevioletred") +
  geom_text(aes(label=transaction_qty), vjust=0.5, check_overlap = TRUE) +
  labs(title="Temporal Analysis - III",subtitle = "This analyzes the trend of sales of products on a hourly basis", x="Hour",y="Total Transaction Quantity")
plot9
```

### Conclusion:
-   The overall sales are higher in the month of June with 50942 sales followed by the month of May with 48233 sales.
-   The least sales were happened in the month of February with 23556 sales followed by the month of January with 24870 sales.
-   The sales on Monday and Friday are comparitively high with 31231 and 31207 sales respectively.
-   There is huge dip in sales on Saturday from Friday with 29614 and the sales on Saturday were very less than all other days.
-   There are average sales on Tuesday and Wednesday with 30449 and 30625 sales respectively.
-   Sales were recorded only between 6th and 20th hour.
-   Sales were highest on 10th hour with a total of 26713 sales followed by 9th and 8th hour with 25370 and 25197 sales respectively.
-   Least sales were happened on 20th hour with a total of 880 sales followed by the 6th hour with 6865 sales.